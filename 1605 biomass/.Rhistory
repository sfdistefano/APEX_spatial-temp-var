scale_x_date(date_breaks = "1 year", date_labels = "%m-%y",expand = c(0,10))+
# scale_color_manual(name = "Forage Production Data") +
theme_bw() +
theme(text = element_text(size = 15, family = 'serif'),
axis.text.x = element_text(angle = 90),
panel.spacing = unit(0.75, "lines"))
library(patchwork)
## Total Biomass
cbbPalette <- c("#E69F00", "#56B4E9", "#009E73")
tot.bm <- ggplot() +
# geom_ribbon(aes(x = Date,
#                 ymin = Total_Mean - SD, ymax = Total_Mean + SD,
#                 color = "Treatment"),
#             subset(Biomass_comb_graze, Type %in% "Simulated"),
#             alpha = 0.15) +
geom_line(aes(x = Date, y = Total_Mean, color = Treatment),
subset(Biomass_comb_graze, Type %in% "Simulated"),
linewidth = 1) +
geom_point(aes(x = Date, y = Total_Mean,
color = Treatment, shape = Treatment),
subset(Biomass_comb_graze, Type == "Observed"),
size = 4) +
geom_errorbar(aes(x = Date,
ymin = Total_Mean - SD,
ymax = Total_Mean + SD,
color = Treatment),
subset(Biomass_comb_graze, Type %in% "Observed"),
linewidth = 1, width = 100) +
# facet_grid(~ Treatment) +
ylab(expression(paste("Ungrazed Standing Biomass (kg ", " ha" ^-1,")"))) +
xlab("Date (Month-Year)")+
scale_x_date(date_breaks = "1 year", date_labels = "%m-%y",expand = c(0,10))+
# scale_color_manual(name = "Forage Production Data") +
theme_bw() +
theme(text = element_text(size = 15, family = 'serif'),
axis.text.x = element_text(angle = 90),
panel.spacing = unit(0.75, "lines"))
## Daily precipitation data from Nicole Kaplan
cper_climate <- read.csv("D:/APEX data and scripts/Data/CPER PPT/CPER daily climate data_model input.csv") %>%
filter(year >= 2014) %>%
mutate(Date = ymd(paste(year, month, day, sep = "-"))) %>%
select(Date, rain.mm., Tmax.oC., Tmin.oC.) %>%
mutate(daily_temp = (Tmax.oC. + Tmin.oC.) / 2) %>%
rename(daily_precip = rain.mm.)
min.temp <- min(cper_climate$daily_temp)
coeff <- 20 / min.temp
cper_climate$daily_temp_scale <- cper_climate$daily_temp * coeff
precip <- ggplot(cper_climate) +
geom_bar(aes(x = Date, y = daily_precip),
alpha = 0.3,
stat = 'identity',
color = "steelblue") +
theme_bw() +
theme(text = element_text(size = 15, family = 'serif'),
axis.text.x = element_text(angle = 90),
axis.title.x = element_blank(),
panel.spacing = unit(0.75, "lines")) +
scale_x_date(date_breaks = "1 year", date_labels = "%m-%y",expand = c(0,10)) +
ylab("Precipitation (mm)")
temp <- ggplot(cper_climate) +
geom_line(aes(x = Date, y = daily_temp),
color = "black") +
theme_bw() +
theme(text = element_text(size = 15, family = 'serif'),
axis.text.x = element_text(angle = 90),
axis.title.x = element_blank(),
panel.spacing = unit(0.75, "lines")) +
scale_x_date(date_breaks = "1 year", date_labels = "%m-%y",expand = c(0,10)) +
ylab("Mean Air Temp. (C)")
## Creating combined plot
(precip | temp) / tot.bm
Biomass_trt_grazeTotal <- merge(Biomass_trt, Biomass_pasture_se,
by = c("Date", "Treatment", "Type"))
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/biomass_1605_CageBiomassRun.R", echo=TRUE)
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/CageBiomass_patchwork fig.R", echo=TRUE)
## Creating combined plot
(precip | temp) / tot.bm / func.group
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/biomass_1605_CageBiomassRun.R", echo=TRUE)
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/biomass_1605_CageBiomassRun.R", echo=TRUE)
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/biomass_1605_CageBiomassRun.R", echo=TRUE)
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/CageBiomass_patchwork fig.R", echo=TRUE)
ggplot() +
geom_ribbon(aes(x = Date, ymin = Mean - SD, ymax = Mean + SD),
subset(Biomass_base_graze, Type %in% "Simulated"),
alpha = 0.15) +
geom_line(aes(x = Date, y = Mean, color = Treatment),
subset(Biomass_base_graze, Type %in% "Simulated"),
linewidth = 1) +
geom_point(aes(x = Date, y = Mean,
color = Treatment, shape = Treatment),
subset(Biomass_base_graze, Type == "Observed"),
size = 1.75, stroke = 0.7) +
geom_errorbar(aes(x = Date,
ymin = Mean - SD, ymax = Mean + SD,
color = Treatment),
subset(Biomass_base_graze, Type %in% "Observed"),
linewidth = 0.7, width = 100) +
ylab(expression(paste("Standing Biomass (kg ", " ha" ^-1,")"))) +
xlab("Date (Month-Year)")+
scale_x_date(date_breaks = "1 year", date_labels = "%m-%y",expand = c(0,10))+
scale_color_manual(values = cbbPalette,
name = "Forage Production Data") +
theme_bw() +
theme(text = element_text(size = 15, family = 'serif'),
axis.text.x = element_text(angle = 90),
panel.spacing = unit(0.75, "lines"))
## Functional Group Biomass
func.group <- ggplot() +
geom_ribbon(aes(x = Date, ymin = Mean - SD, ymax = Mean + SD),
subset(Biomass_base_graze, Type %in% "Simulated"),
alpha = 0.15) +
geom_line(aes(x = Date, y = Mean, color = Treatment),
subset(Biomass_base_graze, Type %in% "Simulated"),
linewidth = 1) +
geom_point(aes(x = Date, y = Mean,
color = Treatment, shape = Treatment),
subset(Biomass_base_graze, Type == "Observed"),
size = 3) +
geom_errorbar(aes(x = Date,
ymin = Mean - SD, ymax = Mean + SD,
color = Treatment),
subset(Biomass_base_graze, Type %in% "Observed"),
linewidth = 0.7, width = 100) +
facet_grid(~APEXcodeFG) +
ylab(expression(paste("Standing Biomass (kg ", " ha" ^-1,")"))) +
xlab("Date (Month-Year)")+
scale_x_date(date_breaks = "1 year", date_labels = "%m-%y",expand = c(0,10))+
theme_bw() +
theme(text = element_text(size = 15, family = 'serif'),
axis.text.x = element_text(angle = 90),
panel.spacing = unit(0.75, "lines"))
ggplot() +
geom_ribbon(aes(x = Date, ymin = Mean - SD, ymax = Mean + SD),
subset(Biomass_base_graze, Type %in% "Simulated"),
alpha = 0.15) +
geom_line(aes(x = Date, y = Mean, color = Treatment),
subset(Biomass_base_graze, Type %in% "Simulated"),
linewidth = 1) +
geom_point(aes(x = Date, y = Mean,
color = Treatment, shape = Treatment),
subset(Biomass_base_graze, Type == "Observed"),
size = 3) +
geom_errorbar(aes(x = Date,
ymin = Mean - SD, ymax = Mean + SD,
color = Treatment),
subset(Biomass_base_graze, Type %in% "Observed"),
linewidth = 0.7, width = 100) +
facet_grid(~APEXcodeFG) +
ylab(expression(paste("Standing Biomass (kg ", " ha" ^-1,")"))) +
xlab("Date (Month-Year)")+
scale_x_date(date_breaks = "1 year", date_labels = "%m-%y",expand = c(0,10))+
theme_bw() +
theme(text = element_text(size = 15, family = 'serif'),
axis.text.x = element_text(angle = 90),
panel.spacing = unit(0.75, "lines"))
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/biomass_1605_CageBiomassRun.R", echo=TRUE)
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/CageBiomass_patchwork fig.R", echo=TRUE)
View(Biomass_base_graze)
View(Biomass_base_graze)
unique(Biomass_base_graze$APEXcodeFG)
## Baseline
Biomass_base_graze <- bm_cag_combine(num.sa = 20,
direct = "D:/01-APEX1605_CO_baseline/")  %>%
mutate(Sim.Type = "Simulated: no variability")
unique(Biomass_base_graze$APEXcodeFG)
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/biomass_1605_CageBiomassRun.R", echo=TRUE)
unique(Biomass_base_graze$APEXcodeFG)
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/biomass_1605_CageBiomassRun.R", echo=TRUE)
unique(Biomass_base_graze$APEXcodeFG)
SimBiom <- fread(path, header = FALSE, skip = 2,
col.names = name.cag, fill = TRUE) %>%
filter(Y %in% c(2014:2023) #& CPNM %in% c("WSPG", "CSPG", "VUOC", "FRB3", "SSHB")
) %>%
select(ID, Y, M, D, CPNM, STL, STD, WS) %>%
mutate(Date = ymd(paste(Y, M, D, sep = "-")),
Treatment = ifelse(ID %in% c(1:10), "TRM", "CARM")) %>%
select(-c(Y:D))
unique(SimBiom$CPNM)
## Importing reference information
PastureID <- read.csv("D:/APEX data and scripts/Data/PastureID_ecosite_20subareas.csv") %>%
mutate(Treatment = ifelse(Treatment == "TGM", "TRM", "CARM"))
## Cleaning simulated data
SimBiom02 <- merge(SimBiom, PastureID,
by = c("ID", "Treatment")) %>%
mutate(Type = "Simulated",
STL_kgha = STL * 1000,
STD_kgha = STD * 1000,
Biomass = STL_kgha + STD_kgha) %>%
dplyr::rename(APEXcodeFG = CPNM,
MeankgPerHa = Biomass)  %>%
select(-c(STL:STD), -c(STL_kgha:STD_kgha))
unique(SimBiom02$CPNM)
unique(SimBiom02$APEXcodeFG)
## Importing observational data
obv22 <- read.csv("D:/APEX data and scripts/Data/CPER Biomass/CARM_Biomass_Widecln_attr_2024-03-26.csv", header = T)%>%
select(2:13,17) %>%
mutate(CSAG = AG, WSPG = (BOBU+WSPG)/2, CSPG = C3PG) %>%
dplyr::rename(Year = YearSampled) %>%
select(1:5,9:15) %>%
subset(Year %in% c(2014:2023)) %>%
pivot_longer(cols = c(FORB:SS, CSAG:CSPG),
names_to = "APEXcodeFG", values_to = "v1") %>%
group_by(Year,Pasture,Plot, Transect, Treatment,APEXcodeFG) %>%
summarize(v1 = mean(v1)) %>%
group_by(Year,Pasture,Plot,Treatment,APEXcodeFG) %>%
summarize(v1 = mean(v1)) %>%
group_by(Year,Pasture,Treatment,APEXcodeFG) %>%
dplyr::summarize(MeankgPerHa = mean(v1)) %>%
subset(#APEXcodeFG %in% c("WSPG", "CSPG", "SS", "FORB", "CSAG") &
Treatment %in% c("AGM","TGM"))%>%
mutate(Type = "Observed",
Date = ymd(paste(Year, 8, 6, sep = "-")),
WS = NA,
APEXcodeFG=as.character(APEXcodeFG)) %>%
ungroup(Year) %>%
select(-Year)
# Changing plant codes
obv22$APEXcodeFG <- gsub("SS","SSHB",obv22$APEXcodeFG)
obv22$APEXcodeFG <- gsub("CSAG","VUOC",obv22$APEXcodeFG)
obv22$APEXcodeFG <- gsub("FORB","FRB3",obv22$APEXcodeFG)
obv22$Treatment<-gsub("TGM","TRM",obv22$Treatment)
obv22$Treatment<-gsub("AGM","CARM",obv22$Treatment)
# changing one pasture name
obv22$Pasture <- gsub("NH", "10S", obv22$Pasture)
## Adding pasture information
obv22 <- merge(obv22, PastureID, by = c("Pasture", "Treatment"))
## Summarizing data into pasture
Biomass_pasture <- rbind(obv22, SimBiom02) %>%
group_by(Date, Pasture, Treatment, Type, APEXcodeFG) %>%
dplyr::summarise(MeankgPerHa = mean(MeankgPerHa)) %>%
group_by(Date,Treatment,Type,APEXcodeFG) %>%
dplyr::summarise(Mean = mean(MeankgPerHa))
Biomass_pasture_se <- rbind(obv22, SimBiom02) %>%
group_by(Date,Treatment,Type,APEXcodeFG) %>%
dplyr::summarise(SE = sd(MeankgPerHa)/sqrt(length(MeankgPerHa)),
SD = sd(MeankgPerHa))
unique(Biomass_pasture$APEXcodeFG)
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/biomass_1605_CageBiomassRun.R", echo=TRUE)
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/CageBiomass_patchwork fig.R", echo=TRUE)
ggplot() +
geom_ribbon(aes(x = Date, ymin = Mean - SD, ymax = Mean + SD),
subset(Biomass_base_graze, Type %in% "Simulated"),
alpha = 0.15) +
geom_line(aes(x = Date, y = Mean, color = Treatment),
subset(Biomass_base_graze, Type %in% "Simulated"),
linewidth = 1) +
geom_point(aes(x = Date, y = Mean,
color = Treatment, shape = Treatment),
subset(Biomass_base_graze, Type == "Observed"),
size = 3) +
geom_errorbar(aes(x = Date,
ymin = Mean - SD, ymax = Mean + SD,
color = Treatment),
subset(Biomass_base_graze, Type %in% "Observed"),
linewidth = 0.7, width = 100) +
facet_wrap(~APEXcodeFG) +
ylab(expression(paste("Standing Biomass (kg ", " ha" ^-1,")"))) +
xlab("Date (Month-Year)")+
scale_x_date(date_breaks = "1 year", date_labels = "%m-%y",expand = c(0,10))+
theme_bw() +
theme(text = element_text(size = 15, family = 'serif'),
axis.text.x = element_text(angle = 90),
panel.spacing = unit(0.75, "lines"))
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/biomass_1605_CageBiomassRun.R", echo=TRUE)
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/CageBiomass_patchwork fig.R", echo=TRUE)
ggplot() +
geom_ribbon(aes(x = Date, ymin = Mean - SD, ymax = Mean + SD),
subset(Biomass_base_graze, Type %in% "Simulated"),
alpha = 0.15) +
geom_line(aes(x = Date, y = Mean, color = Treatment),
subset(Biomass_base_graze, Type %in% "Simulated"),
linewidth = 1) +
geom_point(aes(x = Date, y = Mean,
color = Treatment, shape = Treatment),
subset(Biomass_base_graze, Type == "Observed"),
size = 3) +
geom_errorbar(aes(x = Date,
ymin = Mean - SD, ymax = Mean + SD,
color = Treatment),
subset(Biomass_base_graze, Type %in% "Observed"),
linewidth = 0.7, width = 100) +
facet_wrap(~APEXcodeFG) +
ylab(expression(paste("Standing Biomass (kg ", " ha" ^-1,")"))) +
xlab("Date (Month-Year)")+
scale_x_date(date_breaks = "1 year", date_labels = "%m-%y",expand = c(0,10))+
theme_bw() +
theme(text = element_text(size = 15, family = 'serif'),
axis.text.x = element_text(angle = 90),
panel.spacing = unit(0.75, "lines"))
ggplot() +
geom_ribbon(aes(x = Date, ymin = Mean - SD, ymax = Mean + SD),
subset(Biomass_base_graze, Type %in% "Simulated"),
alpha = 0.15) +
geom_line(aes(x = Date, y = Mean, color = Treatment),
subset(Biomass_base_graze, Type %in% "Simulated"),
linewidth = 1) +
geom_point(aes(x = Date, y = Mean,
color = Treatment, shape = Treatment),
subset(Biomass_base_graze, Type == "Observed"),
size = 3) +
geom_errorbar(aes(x = Date,
ymin = Mean - SD, ymax = Mean + SD,
color = Treatment),
subset(Biomass_base_graze, Type %in% "Observed"),
linewidth = 0.7, width = 100) +
facet_grid(~APEXcodeFG) +
ylab(expression(paste("Standing Biomass (kg ", " ha" ^-1,")"))) +
xlab("Date (Month-Year)")+
scale_x_date(date_breaks = "1 year", date_labels = "%m-%y",expand = c(0,10))+
theme_bw() +
theme(text = element_text(size = 15, family = 'serif'),
axis.text.x = element_text(angle = 90),
panel.spacing = unit(0.75, "lines"))
?facet_grid
ggplot() +
geom_ribbon(aes(x = Date, ymin = Mean - SD, ymax = Mean + SD),
subset(Biomass_base_graze, Type %in% "Simulated"),
alpha = 0.15) +
geom_line(aes(x = Date, y = Mean, color = Treatment),
subset(Biomass_base_graze, Type %in% "Simulated"),
linewidth = 1) +
geom_point(aes(x = Date, y = Mean,
color = Treatment, shape = Treatment),
subset(Biomass_base_graze, Type == "Observed"),
size = 3) +
geom_errorbar(aes(x = Date,
ymin = Mean - SD, ymax = Mean + SD,
color = Treatment),
subset(Biomass_base_graze, Type %in% "Observed"),
linewidth = 0.7, width = 100) +
facet_grid(~APEXcodeFG, cols = 1) +
ylab(expression(paste("Standing Biomass (kg ", " ha" ^-1,")"))) +
xlab("Date (Month-Year)")+
scale_x_date(date_breaks = "1 year", date_labels = "%m-%y",expand = c(0,10))+
theme_bw() +
theme(text = element_text(size = 15, family = 'serif'),
axis.text.x = element_text(angle = 90),
panel.spacing = unit(0.75, "lines"))
?facet_wrap
ggplot() +
geom_ribbon(aes(x = Date, ymin = Mean - SD, ymax = Mean + SD),
subset(Biomass_base_graze, Type %in% "Simulated"),
alpha = 0.15) +
geom_line(aes(x = Date, y = Mean, color = Treatment),
subset(Biomass_base_graze, Type %in% "Simulated"),
linewidth = 1) +
geom_point(aes(x = Date, y = Mean,
color = Treatment, shape = Treatment),
subset(Biomass_base_graze, Type == "Observed"),
size = 3) +
geom_errorbar(aes(x = Date,
ymin = Mean - SD, ymax = Mean + SD,
color = Treatment),
subset(Biomass_base_graze, Type %in% "Observed"),
linewidth = 0.7, width = 100) +
facet_wrap(~APEXcodeFG, ncol = 1) +
ylab(expression(paste("Standing Biomass (kg ", " ha" ^-1,")"))) +
xlab("Date (Month-Year)")+
scale_x_date(date_breaks = "1 year", date_labels = "%m-%y",expand = c(0,10))+
theme_bw() +
theme(text = element_text(size = 15, family = 'serif'),
axis.text.x = element_text(angle = 90),
panel.spacing = unit(0.75, "lines"))
ggplot() +
geom_ribbon(aes(x = Date, ymin = Mean - SD, ymax = Mean + SD),
subset(Biomass_base_graze, Type %in% "Simulated"),
alpha = 0.15) +
geom_line(aes(x = Date, y = Mean, color = Treatment),
subset(Biomass_base_graze, Type %in% "Simulated"),
linewidth = 1) +
geom_point(aes(x = Date, y = Mean,
color = Treatment, shape = Treatment),
subset(Biomass_base_graze, Type == "Observed"),
size = 3) +
geom_errorbar(aes(x = Date,
ymin = Mean - SD, ymax = Mean + SD,
color = Treatment),
subset(Biomass_base_graze, Type %in% "Observed"),
linewidth = 0.7, width = 100) +
facet_wrap(~APEXcodeFG, ncol = 1, scales = "free_y") +
ylab(expression(paste("Standing Biomass (kg ", " ha" ^-1,")"))) +
xlab("Date (Month-Year)")+
scale_x_date(date_breaks = "1 year", date_labels = "%m-%y",expand = c(0,10))+
theme_bw() +
theme(text = element_text(size = 15, family = 'serif'),
axis.text.x = element_text(angle = 90),
panel.spacing = unit(0.75, "lines"))
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/CageBiomass_patchwork fig.R", echo=TRUE)
## Creating combined plot
(precip | temp) / tot.bm / func.group +
plot_layout(heights = c(1, 0.5, 0.5))
## Creating combined plot
(precip | temp) / tot.bm / func.group +
plot_layout(heights = c(2, 0.5, 0.5))
## Creating combined plot
(precip | temp) / tot.bm / func.group +
plot_layout(heights = c(0.5, 0.5, 2))
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/CageBiomass_patchwork fig.R", echo=TRUE)
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/CageBiomass_patchwork fig.R", echo=TRUE)
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/CageBiomass_patchwork fig.R", echo=TRUE)
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/CageBiomass_patchwork fig.R", echo=TRUE)
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/biomass_1605_CageBiomassRun.R", echo=TRUE)
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/CageBiomass_patchwork fig.R", echo=TRUE)
ggplot() +
geom_ribbon(aes(x = Date,
ymin = Total_Mean - SD, ymax = Total_Mean + SD,
color = "Treatment"),
subset(Biomass_trt_grazeTotal, Type %in% "Simulated"),
alpha = 0.15) +
geom_line(aes(x = Date, y = Total_Mean, color = Treatment),
subset(Biomass_trt_grazeTotal, Type %in% "Simulated"),
linewidth = 1) +
geom_point(aes(x = Date, y = Total_Mean,
color = Treatment, shape = Treatment),
subset(Biomass_trt_grazeTotal, Type == "Observed"),
size = 4) +
geom_errorbar(aes(x = Date,
ymin = Total_Mean - SD,
ymax = Total_Mean + SD,
color = Treatment),
subset(Biomass_trt_grazeTotal, Type %in% "Observed"),
linewidth = 1, width = 100) +
ylab(expression(paste("Standing Biomass (kg ", " ha" ^-1,")"))) +
xlab("Date (Month-Year)")+
scale_x_date(date_breaks = "1 year", date_labels = "%m-%y",expand = c(0,10))+
theme_bw() +
theme(text = element_text(size = 12.5, family = 'serif'),
axis.text.x = element_text(angle = 90),
panel.spacing = unit(0.75, "lines"))
ggplot() +
geom_ribbon(aes(x = Date,
ymin = Total_Mean - SD, ymax = Total_Mean + SD),
subset(Biomass_trt_grazeTotal, Type %in% "Simulated"),
alpha = 0.15) +
geom_line(aes(x = Date, y = Total_Mean, color = Treatment),
subset(Biomass_trt_grazeTotal, Type %in% "Simulated"),
linewidth = 1) +
geom_point(aes(x = Date, y = Total_Mean,
color = Treatment, shape = Treatment),
subset(Biomass_trt_grazeTotal, Type == "Observed"),
size = 4) +
geom_errorbar(aes(x = Date,
ymin = Total_Mean - SD,
ymax = Total_Mean + SD,
color = Treatment),
subset(Biomass_trt_grazeTotal, Type %in% "Observed"),
linewidth = 1, width = 100) +
ylab(expression(paste("Standing Biomass (kg ", " ha" ^-1,")"))) +
xlab("Date (Month-Year)")+
scale_x_date(date_breaks = "1 year", date_labels = "%m-%y",expand = c(0,10))+
theme_bw() +
theme(text = element_text(size = 12.5, family = 'serif'),
axis.text.x = element_text(angle = 90),
panel.spacing = unit(0.75, "lines"))
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/CageBiomass_patchwork fig.R", echo=TRUE)
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/biomass_1605_CageBiomassRun.R", echo=TRUE)
source("~/GitHub/APEX_spatial-temp-var/1605 biomass/CageBiomass_patchwork fig.R", echo=TRUE)
View(graze_simStats)
write.csv(graze_simStats, "D:/APEX data and scripts/APEX outputs/grazeTrt_simStats_07112024.csv")
cbbPalette <- c("#000000", "#E69F00", "#56B4E9", "#009E73")
## Plot across grazing treatment*plant functional group
ggplot()+
geom_ribbon(aes(x = Date, ymin = Mean - SD, ymax = Mean + SD),
subset(Biomass_base_graze, Type %in% "Simulated"),
alpha = 0.15) +
geom_line(aes(x = Date, y = Mean, color = Sim.Type),
subset(Biomass_comb_graze, Type %in% "Simulated"),
linewidth = 1) +
geom_point(aes(x = Date, y = Mean, color = "Observed"),
subset(Biomass_base_graze, Type == "Observed"),
size = 1.75, stroke = 0.7) +
geom_errorbar(aes(x = Date, ymin = Mean - SD, ymax = Mean + SD,
color = "Observed"),
subset(Biomass_base_graze, Type %in% "Observed"),
linewidth = 0.7, width = 100) +
facet_grid(APEXcodeFG ~ Treatment, scales = "free_y") +
ylab(expression(paste("Ungrazed Standing Biomass (kg ", " ha" ^-1,")"))) +
xlab("Date (Month-Year)")+
scale_x_date(date_breaks = "1 year", date_labels = "%m-%y",expand = c(0,10))+
scale_color_manual(values = cbbPalette,
name = "Forage Production Data") +
theme_bw() +
theme(text = element_text(size = 15, family = 'serif'),
axis.text.x = element_text(angle = 90),
panel.spacing = unit(0.75, "lines"))
## Plot across grazing treatment*plant functional group
ggplot()+
geom_ribbon(aes(x = Date, ymin = Mean - SD, ymax = Mean + SD),
subset(Biomass_base_graze, Type %in% "Simulated"),
alpha = 0.15) +
geom_line(aes(x = Date, y = Mean, color = Sim.Type),
subset(Biomass_comb_graze, Type %in% "Simulated"),
linewidth = 1) +
geom_point(aes(x = Date, y = Mean, color = "Observed"),
subset(Biomass_base_graze, Type == "Observed"),
size = 1.75, stroke = 0.7) +
geom_errorbar(aes(x = Date, ymin = Mean - SD, ymax = Mean + SD,
color = "Observed"),
subset(Biomass_base_graze, Type %in% "Observed"),
linewidth = 0.7, width = 100) +
facet_grid(factor(APEXcodeFG,
levels = c("WSPG", "CSPG", "FORB", "SSHB", "CSAG")) ~ Treatment,
scales = "free_y") +
ylab(expression(paste("Ungrazed Standing Biomass (kg ", " ha" ^-1,")"))) +
xlab("Date (Month-Year)")+
scale_x_date(date_breaks = "1 year", date_labels = "%m-%y",expand = c(0,10))+
scale_color_manual(values = cbbPalette,
name = "Forage Production Data") +
theme_bw() +
theme(text = element_text(size = 15, family = 'serif'),
axis.text.x = element_text(angle = 90),
panel.spacing = unit(0.75, "lines"))
